# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ Timeweb –¥–ª—è Lec7

## –í–∞—à —Å–µ—Ä–≤–µ—Ä:
- **IP:** 194.87.104.179
- **SSH:** `ssh root@194.87.104.179`
- **–ü–∞—Ä–æ–ª—å:** (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –ø–∞–Ω–µ–ª–∏ Timeweb, –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH

### Windows (PowerShell –∏–ª–∏ Git Bash):

```bash
ssh root@194.87.104.179
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ—Å–∏—Ç:
```
The authenticity of host '194.87.104.179' can't be established.
Are you sure you want to continue connecting (yes/no)?
```
–í–≤–µ–¥–∏—Ç–µ `yes` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter.

–ó–∞—Ç–µ–º –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å root (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –ø–∞–Ω–µ–ª–∏ Timeweb).

---

## –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker Compose
curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
docker --version
docker-compose --version
```

–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –≤–µ—Ä—Å–∏–∏ Docker –∏ Docker Compose.

---

## –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ~

# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç —Å GitHub
git clone https://github.com/zebvalera774583-maker/Lec7.com.git

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd Lec7.com
```

---

## –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
# –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª
nano .env
```

–í—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–∏):

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–æ–ª—å –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π)
DATABASE_URL=postgresql://lec7:CHANGE_THIS_PASSWORD@postgres:5432/lec7?schema=public

# URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
NEXT_PUBLIC_APP_URL=http://194.87.104.179:3000

# JWT —Å–µ–∫—Ä–µ—Ç (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long-change-this

# OpenAI API –∫–ª—é—á
OPENAI_API_KEY=sk-your-openai-api-key-here

# Timeweb S3 –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∫–µ—Ç –≤ –ø–∞–Ω–µ–ª–∏ Timeweb)
S3_ENDPOINT=https://s3.timeweb.com
S3_ACCESS_KEY_ID=your-timeweb-s3-access-key
S3_SECRET_ACCESS_KEY=your-timeweb-s3-secret-key
S3_BUCKET_NAME=lec7-storage
S3_REGION=ru-1
S3_PUBLIC_URL=https://lec7-storage.s3.timeweb.com
```

**–ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ nano:**
- –ù–∞–∂–º–∏—Ç–µ `Ctrl + O` (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å)
- –ù–∞–∂–º–∏—Ç–µ `Enter` (–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å)
- –ù–∞–∂–º–∏—Ç–µ `Ctrl + X` (–≤—ã–π—Ç–∏)

---

## –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ docker-compose.yml

```bash
nano docker-compose.yml
```

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```yaml
NEXT_PUBLIC_APP_URL: http://localhost:3000
```

–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:
```yaml
NEXT_PUBLIC_APP_URL: http://194.87.104.179:3000
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (`Ctrl + O`, `Enter`, `Ctrl + X`).

---

## –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–±–∏—Ä–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d --build

# –ñ–¥—ë–º 10 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
sleep 10

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec app npx prisma migrate deploy
```

---

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
docker-compose logs -f app
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://194.87.104.179:3000**

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ S3

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å S3 –±–∞–∫–µ—Ç –≤ Timeweb:

1. –í –ø–∞–Ω–µ–ª–∏ Timeweb –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–•—Ä–∞–Ω–∏–ª–∏—â–µ S3"**
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –±–∞–∫–µ—Ç:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `lec7-storage`
   - –†–µ–≥–∏–æ–Ω: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π
3. –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ (Access Key ID –∏ Secret Access Key)
4. –í–∫–ª—é—á–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è —á—Ç–µ–Ω–∏—è (–¥–ª—è –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏ –≤ `.env` —Ñ–∞–π–ª

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f app

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose restart

# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec app sh
```

---

## –ì–æ—Ç–æ–≤–æ! ‚úÖ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É:
**http://194.87.104.179:3000**
